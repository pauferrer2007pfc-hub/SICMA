<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SICMA Profesional | Limpieza Integral en Barcelona</title>
<style>
/* ========== VARIABLES ========== */
:root{
  --accent: #0a77d6;
  --accent-strong: #055fb0;
  --muted: #6b7280;
  --bg: #ffffff;
  --card: #ffffff;
  --glass: rgba(255,255,255,0.6);
  --radius: 14px;
  --shadow: 0 10px 30px rgba(2,6,23,0.06);
  --maxw: 1200px;
  --neon: rgba(10,119,214,0.15);
  --diamond: linear-gradient(90deg, #0a77d6 0%, #34a0ff 100%);
  --text-dark: #0b1220;
}

/* ========== RESET ========== */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family: Inter, "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background:var(--bg);
  color:var(--text-dark);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.5;
  overflow-x:hidden;
}

/* ========== LAYOUT ========== */
.container{max-width:var(--maxw);margin:0 auto;padding:0 20px}
header{
  position:fixed;top:0;left:0;right:0;z-index:999;
  background: rgba(255,255,255,0.95);
  backdrop-filter: blur(6px);
  box-shadow: 0 6px 24px rgba(2,6,23,0.06);
  display:flex;align-items:center;justify-content:space-between;
  padding:16px 24px;
}
.header-left{display:flex;align-items:center;gap:14px}
.logo {
  display:flex;align-items:center;gap:10px;
}
.logo .brand{
  font-weight:700;color:var(--accent);font-size:1.1rem;
}
.logo .img{
  width:84px;height:48px;background:url('https://cys-sicma.com/wp-content/uploads/2023/05/logo.png') center/contain no-repeat;
  border-radius:8px;
}

/* NAV */
nav{display:flex;gap:14px;align-items:center}
nav a{
  color:var(--text-dark);text-decoration:none;padding:8px 12px;border-radius:8px;font-weight:600;
  transition: all .25s ease;
  letter-spacing:.2px;
}
nav a:hover{background:var(--neon);color:var(--accent-strong)}
nav a.active{box-shadow:inset 0 -3px 0 var(--accent);color:var(--accent-strong)}

/* ========== HERO ========== */
.hero{
  min-height:72vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:140px 0 60px; /* leave space for fixed header */
  background: linear-gradient(180deg, rgba(10,119,214,0.06) 0%, rgba(255,255,255,0) 50%);
  text-align:center;
}
.hero-card{
  max-width:980px;background:#fff;border-radius:18px;padding:36px;
  box-shadow:var(--shadow);
  border:1px solid rgba(10,119,214,0.06);
}
.hero h1{font-size:2.6rem;margin-bottom:12px;color:var(--accent-strong)}
.hero p{font-size:1.05rem;color:var(--muted);margin-bottom:14px}

/* ========== SECCIONES ========== */
section{padding:80px 0;min-height:30vh}
.section-title{display:block;text-align:center;margin-bottom:28px}
.section-title h2{font-size:2.2rem;color:var(--accent);letter-spacing:1px}

/* slide-in effects: left & right per section */
.fade-left, .fade-right, .fade-up{opacity:0;transform:translateY(20px);transition:all .8s cubic-bezier(.2,.9,.2,1)}
.fade-left.visible{opacity:1;transform:translateX(0)}
.fade-left.start-left{transform:translateX(-40px)}
.fade-right.visible{opacity:1;transform:translateX(0)}
.fade-right.start-right{transform:translateX(40px)}
.fade-up.visible{opacity:1;transform:translateY(0)}

/* ========== SERVICIOS CARDS ========== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:20px;
  align-items:stretch;
}
.card{
  background:var(--card);
  padding:20px;border-radius:14px;box-shadow:var(--shadow);
  border:1px solid rgba(10,119,214,0.04);
  transition:transform .35s ease, box-shadow .35s;
}
.card:hover{transform: translateY(-8px);box-shadow: 0 18px 40px rgba(10,119,214,0.06)}

/* card heading */
.card h3{color:var(--accent);margin-bottom:8px;font-size:1.05rem}
.card p{color:var(--muted);font-size:0.98rem}

/* ========== CARRUSEL (GALERÍA) ========== */
.gallery-wrap{max-width:1100px;margin:0 auto;position:relative;padding:18px}
.carousel{
  overflow:hidden;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.9), #fff);
  border:1px solid rgba(10,119,214,0.06);
  box-shadow:var(--shadow);
}
.carousel-track{
  display:flex;transition:transform .6s cubic-bezier(.2,.9,.2,1);
  will-change:transform;
}
.carousel-item{
  min-width:100%;flex:0 0 100%;padding:12px;display:flex;align-items:center;justify-content:center;
}
.carousel-item img{
  width:100%;height:420px;object-fit:cover;border-radius:12px;cursor:pointer;display:block;
  transition:transform .35s ease, box-shadow .35s;
}
.carousel-controls{
  position:absolute;top:50%;left:0;right:0;transform:translateY(-50%);
  display:flex;justify-content:space-between;padding:0 10px;pointer-events:none;
}
.btn-arrow{
  background:linear-gradient(180deg, rgba(255,255,255,0.95), #fff);
  border:1px solid rgba(10,119,214,0.08);
  width:46px;height:46px;border-radius:10px;display:flex;align-items:center;justify-content:center;
  cursor:pointer;box-shadow:0 6px 18px rgba(2,6,23,0.06);pointer-events:auto;
  transition:transform .15s;
}
.btn-arrow:hover{transform:scale(1.04)}
.btn-arrow svg{width:18px;height:18px;fill:var(--accent)}

/* small dots */
.carousel-dots{display:flex;gap:8px;justify-content:center;margin-top:12px}
.dot{width:10px;height:10px;border-radius:999px;background:#e6eefc;border:1px solid rgba(10,119,214,0.08);cursor:pointer}
.dot.active{background:var(--accent);box-shadow:0 0 8px rgba(10,119,214,0.2)}

/* ========== LIGHTBOX ========== */
.lightbox{
  position:fixed;inset:0;background:rgba(3,6,23,0.78);display:none;align-items:center;justify-content:center;z-index:2000;
}
.lightbox.show{display:flex}
.lightbox-inner{max-width:1100px;width:calc(100% - 48px);position:relative}
.lightbox-img{width:100%;height:75vh;object-fit:contain;border-radius:10px}
.lightbox-close{position:absolute;top:-16px;right:-16px;background:#fff;border-radius:10px;padding:8px;cursor:pointer;box-shadow:var(--shadow)}
.lightbox-nav{position:absolute;top:50%;transform:translateY(-50%);pointer-events:auto}
.lightbox-prev{left:-54px}
.lightbox-next{right:-54px}
.lb-btn{background:#fff;border-radius:10px;padding:8px;cursor:pointer;box-shadow:var(--shadow);border:1px solid rgba(0,0,0,0.06)}
.lb-caption{color:#fff;text-align:center;margin-top:12px;font-weight:600}

/* ========== COMENTARIOS ========== */
.comentarios-wrap{max-width:900px;margin:0 auto}
.comentarios-list{display:flex;flex-direction:column;gap:12px;margin-bottom:14px}
.comentario{
  background:#fff;padding:14px;border-radius:12px;border-left:4px solid var(--accent);box-shadow:var(--shadow);
}
.comentario .meta{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.comentario strong{color:var(--accent)}
.delete-btn{background:#ff4d4f;border:0;color:#fff;padding:6px 8px;border-radius:8px;cursor:pointer}

/* form */
.form {display:flex;flex-direction:column;gap:10px;margin-top:12px}
.input, textarea{padding:10px;border-radius:10px;border:1px solid #e6e9ef;font-size:0.98rem}
.btn-primary{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:0;font-weight:700;cursor:pointer;box-shadow:0 8px 20px rgba(10,119,214,0.08)}
.note{color:var(--muted);font-size:0.9rem;margin-top:6px}

/* ========== FOOTER ========== */
footer{background:var(--accent);color:#fff;padding:30px 20px;margin-top:40px;text-align:center;border-top-left-radius:20px;border-top-right-radius:20px}

/* ========== RESPONSIVE ========== */
@media(min-width:900px){
  .carousel-item{padding:18px}
  .carousel-item img{height:520px}
}
@media(max-width:768px){
  .nav-compact{display:none}
  header{padding:12px 16px}
  .hero-card{padding:20px}
  .carousel-item img{height:320px}
  .lightbox-img{height:60vh}
  .btn-arrow{width:40px;height:40px}
  .lightbox-prev{left:-44px}.lightbox-next{right:-44px}
}
</style>
</head>
<body>

<header>
  <div class="container header-left">
    <div class="logo">
      <div class="img" aria-hidden="true"></div>
      <div class="brand">SICMA Profesional</div>
    </div>
  </div>

  <nav class="container nav-compact" aria-label="Navegación principal">
    <a href="#inicio" class="nav-link active">Inicio</a>
    <a href="#sobre" class="nav-link">Sobre Nosotros</a>
    <a href="#servicios" class="nav-link">Servicios</a>
    <a href="#galeria" class="nav-link">Galería</a>
    <a href="#comentarios" class="nav-link">Comentarios</a>
    <a href="#contacto" class="nav-link">Contacto</a>
  </nav>
</header>

<main style="padding-top:92px">
  <section id="inicio" class="hero">
    <div class="container hero-card fade-up">
      <h1>Bienvenido a SICMA Profesional</h1>
      <p>En SICMA somos una empresa de limpieza integral en Barcelona con extensa experiencia. Ofrecemos servicios profesionales para comunidades, oficinas, colegios y mucho más. Calidad, confianza y detalle.</p>
    </div>
  </section>

  <section id="sobre" class="fade-left start-left">
    <div class="container">
      <span class="section-title"><h2>Sobre Nosotros</h2></span>
      <div class="card">
        <p><strong>SICMA</strong> somos una reconocida empresa de limpiezas integrales en Barcelona, y nuestra amplia experiencia en el sector nos permite adaptarnos a las necesidades de cada cliente, proporcionando soluciones eficientes y personalizadas. Nos diferenciamos por la atención al detalle, supervisión constante del equipo y la confianza que generamos en cada trabajo. ¡Conócenos mejor!</p>
        <p style="margin-top:12px">El mantenimiento de comunidades necesita un servicio eficiente y bien planificado, y por eso nos encargamos de todo. Ofrecemos la limpieza de portales, escaleras, ascensores y zonas comunes, asegurando un entorno limpio y agradable para vecinos y visitantes. Además, realizamos la limpieza de cristales con productos y técnicas especializadas.</p>
        <p style="margin-top:12px">Sabemos que un ambiente limpio influye en la productividad y bienestar de los trabajadores. Por ello, nuestro servicio de limpieza de oficinas y despachos cubre desde el mantenimiento diario hasta la desinfección de superficies, eliminando polvo, suciedad y gérmenes. Gestionamos los materiales para que tú solo te preocupes por tu negocio.</p>
        <p style="margin-top:12px">Los colegios necesitan un alto nivel de higiene para garantizar la salud de los alumnos y el personal docente. Por eso, proporcionamos un servicio de limpieza escolar adaptado a cada institución, asegurando un entorno libre de suciedad y bacterias. Desde aulas hasta patios y zonas comunes, nos ocupamos de la desinfección de superficies y la limpieza de cristales.</p>
        <p style="margin-top:12px">Además de nuestros servicios principales, ofrecemos limpiezas de fin de obra, limpieza de pisos y cuidado de mayores, brindando soluciones integrales para cada necesidad. Nuestro compromiso con la calidad, confianza, profesionalidad y seriedad nos ha convertido en una empresa de limpieza integral en Barcelona muy destacada.</p>
        <p style="margin-top:12px"><strong>Contáctanos al 622 581 523 o visita nuestra web para solicitar tu presupuesto sin compromiso.</strong></p>
      </div>
    </div>
  </section>

  <section id="servicios" class="fade-right start-right">
    <div class="container">
      <span class="section-title"><h2>Nuestros Servicios</h2></span>
      <div class="grid">
        <div class="card">
          <h3>Limpieza de Comunidades</h3>
          <p>Servicio de mantenimiento regular para las zonas comunes de edificios residenciales: portales, escaleras, ascensores y patios.</p>
        </div>
        <div class="card">
          <h3>Limpieza de Oficinas</h3>
          <p>Limpieza profesional para espacios de trabajo, desde mantenimiento diario hasta desinfección de superficies.</p>
        </div>
        <div class="card">
          <h3>Limpieza de Colegios</h3>
          <p>Servicio especializado en centros educativos: desinfección de aulas, pasillos, baños, comedores y zonas recreativas.</p>
        </div>
        <div class="card">
          <h3>Limpiezas Especiales</h3>
          <p>Fin de obra, limpiezas a fondo, cristales y tratamientos específicos para todo tipo de superficies.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- GALERÍA: Carrusel deslizable lateral con lightbox -->
  <section id="galeria" class="fade-up">
    <div class="container">
      <span class="section-title"><h2>Galería</h2></span>

      <div class="gallery-wrap">
        <div class="carousel" aria-roledescription="carousel">
          <div class="carousel-track" id="carouselTrack">
            <!-- Siéntete libre de reemplazar img1.jpg..img10.jpg con tus fotos -->
            <div class="carousel-item"><img src="img1.jpg" alt="Trabajo 1" data-index="0"></div>
            <div class="carousel-item"><img src="img2.jpg" alt="Trabajo 2" data-index="1"></div>
            <div class="carousel-item"><img src="img3.jpg" alt="Trabajo 3" data-index="2"></div>
            <div class="carousel-item"><img src="img4.jpg" alt="Trabajo 4" data-index="3"></div>
            <div class="carousel-item"><img src="img5.jpg" alt="Trabajo 5" data-index="4"></div>
            <div class="carousel-item"><img src="img6.jpg" alt="Trabajo 6" data-index="5"></div>
            <div class="carousel-item"><img src="img7.jpg" alt="Trabajo 7" data-index="6"></div>
            <div class="carousel-item"><img src="img8.jpg" alt="Trabajo 8" data-index="7"></div>
            <div class="carousel-item"><img src="img9.jpg" alt="Trabajo 9" data-index="8"></div>
            <div class="carousel-item"><img src="img10.jpg" alt="Trabajo 10" data-index="9"></div>
          </div>
        </div>

        <div class="carousel-controls" aria-hidden="false">
          <div class="btn-arrow" id="prevBtn" aria-label="Anterior">
            <svg viewBox="0 0 24 24"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
          </div>
          <div class="btn-arrow" id="nextBtn" aria-label="Siguiente">
            <svg viewBox="0 0 24 24"><path d="M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg>
          </div>
        </div>

        <div class="carousel-dots" id="carouselDots" aria-hidden="false" style="margin-top:14px"></div>
      </div>
    </div>
  </section>

  <!-- COMENTARIOS -->
  <section id="comentarios" class="fade-left start-left">
    <div class="container comentarios-wrap">
      <span class="section-title"><h2>Comentarios de Clientes</h2></span>

      <div class="comentarios-list" id="comentList">
        <!-- Comentarios cargados por JS -->
      </div>

      <form id="commentForm" class="form" onsubmit="return false;">
        <input id="cName" class="input" placeholder="Tu nombre" required />
        <textarea id="cMsg" class="input" placeholder="Escribe tu comentario..." rows="4" required></textarea>
        <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
          <button id="sendComment" class="btn-primary">Enviar Comentario</button>
          <div class="note">Los comentarios se almacenan localmente en tu navegador. Solo podrás eliminar los comentarios que hayas creado en esta sesión.</div>
        </div>
      </form>
    </div>
  </section>

  <!-- CONTACTO -->
  <section id="contacto" class="fade-right start-right">
    <div class="container">
      <span class="section-title"><h2>Contacto</h2></span>
      <div class="card" style="text-align:center">
        <p><strong>Teléfono:</strong> 622 581 523</p>
        <p><strong>Email:</strong> silviaceballos1972@yahoo.es</p>
        <p>Si lo prefieres, déjanos tus datos y te llamamos: <em>¡Presupuesto sin compromiso!</em></p>
      </div>
    </div>
  </section>

</main>

<!-- LIGHTBOX (overlay) -->
<div class="lightbox" id="lightbox" aria-hidden="true">
  <div class="lightbox-inner">
    <img src="" class="lightbox-img" id="lightboxImg" alt="Imagen ampliada">
    <div style="display:flex;justify-content:center">
      <div class="lb-caption" id="lbCaption"></div>
    </div>
    <div class="lightbox-close lb-btn" id="lbClose" title="Cerrar">✕</div>
    <div class="lightbox-nav lightbox-prev" id="lbPrev"><div class="lb-btn">◀</div></div>
    <div class="lightbox-nav lightbox-next" id="lbNext"><div class="lb-btn">▶</div></div>
  </div>
</div>

<footer>
  <div class="container">
    © 2025 SICMA Profesional — Calidad, confianza y detalle. Dirección: Barcelona — Tel: 622 581 523
  </div>
</footer>

<script>
/* ========== Navegación activa smooth ========== */
const navLinks = document.querySelectorAll('nav a, .nav-compact a');
navLinks.forEach(link=>{
  link.addEventListener('click', e=>{
    e.preventDefault();
    document.querySelectorAll('nav a').forEach(a=>a.classList.remove('active'));
    link.classList.add('active');
    const target = document.querySelector(link.getAttribute('href'));
    if(target) target.scrollIntoView({behavior:'smooth',block:'start'});
  });
});

/* ========== SLIDE-IN ANIMATIONS ========== */
const fadeEls = document.querySelectorAll('.fade-left, .fade-right, .fade-up');
function handleScrollReveal(){
  fadeEls.forEach(el=>{
    const rect = el.getBoundingClientRect();
    if(rect.top < window.innerHeight - 100){
      el.classList.add('visible');
    }
  });
}
window.addEventListener('load', handleScrollReveal);
window.addEventListener('scroll', handleScrollReveal);

/* ========== CARRUSEL (slide lateral) ========== */
const track = document.getElementById('carouselTrack');
const items = Array.from(document.querySelectorAll('.carousel-item'));
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const dotsWrap = document.getElementById('carouselDots');
let currentIndex = 0;
let isAnimating = false;
const total = items.length;

/* Crear dots */
for(let i=0;i<total;i++){
  const d = document.createElement('div');
  d.className = 'dot' + (i===0? ' active':'');
  d.dataset.index = i;
  dotsWrap.appendChild(d);
  d.addEventListener('click', ()=> goToIndex(i));
}

/* Ajustar ancho track en caso de querer múltiples */
function updateCarousel(){
  // cada item ocupa 100% del contenedor (single slide)
  track.style.transform = `translateX(-${currentIndex * 100}%)`;
  document.querySelectorAll('.dot').forEach(dot=>dot.classList.remove('active'));
  document.querySelectorAll('.dot')[currentIndex].classList.add('active');
}
function goToIndex(i){
  if(isAnimating) return;
  isAnimating = true;
  currentIndex = (i + total) % total;
  updateCarousel();
  setTimeout(()=> isAnimating=false, 600);
}
/* Siguiente / Anterior */
nextBtn.addEventListener('click', ()=> goToIndex(currentIndex+1));
prevBtn.addEventListener('click', ()=> goToIndex(currentIndex-1));

/* Auto-play suave (opcional) */
let autoplay = true;
let autoplayInterval = setInterval(()=>{ if(autoplay) goToIndex(currentIndex+1); }, 5000);
document.querySelector('.carousel').addEventListener('mouseenter', ()=> autoplay=false);
document.querySelector('.carousel').addEventListener('mouseleave', ()=> autoplay=true);

/* Responsive swipe support for mobile */
let startX = 0;
track.addEventListener('touchstart', (e)=> startX = e.touches[0].clientX);
track.addEventListener('touchend', (e)=>{
  const diff = (e.changedTouches[0].clientX - startX);
  if(Math.abs(diff) > 50){
    if(diff < 0) goToIndex(currentIndex+1); else goToIndex(currentIndex-1);
  }
});

/* click en imagen para abrir lightbox */
const images = document.querySelectorAll('.carousel-item img');
images.forEach(img=>{
  img.addEventListener('click', () => openLightbox(Number(img.dataset.index)));
});

/* ========== LIGHTBOX ========== */
const lightbox = document.getElementById('lightbox');
const lbImg = document.getElementById('lightboxImg');
const lbClose = document.getElementById('lbClose');
const lbPrev = document.getElementById('lbPrev');
const lbNext = document.getElementById('lbNext');
const lbCaption = document.getElementById('lbCaption');

function openLightbox(idx){
  currentIndex = idx;
  showLB();
}
function showLB(){
  const img = images[currentIndex];
  lbImg.src = img.getAttribute('src');
  lbImg.alt = img.alt || '';
  lbCaption.textContent = `${currentIndex+1} / ${images.length}`;
  lightbox.classList.add('show');
  lightbox.setAttribute('aria-hidden','false');
  // also update carousel position so both stay in sync
  updateCarousel();
}
function closeLB(){
  lightbox.classList.remove('show');
  lightbox.setAttribute('aria-hidden','true');
}
lbClose.addEventListener('click', closeLB);
lightbox.addEventListener('click', (e)=>{ if(e.target === lightbox) closeLB(); });
lbPrev.addEventListener('click', ()=>{ currentIndex = (currentIndex-1 + images.length)%images.length; showLB();});
lbNext.addEventListener('click', ()=>{ currentIndex = (currentIndex+1)%images.length; showLB();});

/* keyboard nav for lightbox and carousel */
document.addEventListener('keydown', (e)=>{
  if(lightbox.classList.contains('show')){
    if(e.key === 'ArrowRight') lbNext.click();
    if(e.key === 'ArrowLeft') lbPrev.click();
    if(e.key === 'Escape') closeLB();
  } else {
    if(e.key === 'ArrowRight') nextBtn.click();
    if(e.key === 'ArrowLeft') prevBtn.click();
  }
});

/* ========== COMENTARIOS: persistencia y borrado solo por autor de sesión ========== */
const commentForm = document.getElementById('commentForm');
const commentList = document.getElementById('comentList');
const cName = document.getElementById('cName');
const cMsg = document.getElementById('cMsg');

// helper tokens: each browser session gets a token to mark "your" comments
if(!sessionStorage.getItem('sicmaSessionToken')){
  sessionStorage.setItem('sicmaSessionToken', Math.random().toString(36).slice(2));
}
const sessionToken = sessionStorage.getItem('sicmaSessionToken');

function loadComments(){
  const raw = localStorage.getItem('sicmaComments');
  let arr = raw ? JSON.parse(raw) : [];
  // render
  commentList.innerHTML = '';
  arr.forEach((c)=>{
    const el = document.createElement('div');
    el.className = 'comentario';
    const meta = document.createElement('div');
    meta.className = 'meta';
    const left = document.createElement('div');
    left.innerHTML = `<strong>${escapeHtml(c.name)}</strong> <span style="color:var(--muted);font-size:0.9rem;margin-left:10px">${new Date(c.ts).toLocaleString()}</span>`;
    meta.appendChild(left);
    if(c.owner === sessionToken){
      const del = document.createElement('button');
      del.className = 'delete-btn';
      del.textContent = 'Eliminar';
      del.addEventListener('click', ()=> {
        if(!confirm('¿Eliminar tu comentario?')) return;
        removeComment(c.id);
      });
      meta.appendChild(del);
    }
    el.appendChild(meta);
    const p = document.createElement('p');
    p.textContent = c.msg;
    el.appendChild(p);
    commentList.appendChild(el);
  });
}
function saveComment(obj){
  const raw = localStorage.getItem('sicmaComments');
  let arr = raw ? JSON.parse(raw) : [];
  arr.unshift(obj); // newest first
  localStorage.setItem('sicmaComments', JSON.stringify(arr));
  loadComments();
}
function removeComment(id){
  const raw = localStorage.getItem('sicmaComments');
  let arr = raw ? JSON.parse(raw) : [];
  arr = arr.filter(x => x.id !== id);
  localStorage.setItem('sicmaComments', JSON.stringify(arr));
  loadComments();
}
function escapeHtml(str){
  return str.replace(/[&<>"']/g, (m)=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
}

document.getElementById('sendComment').addEventListener('click', ()=>{
  const name = cName.value.trim();
  const msg = cMsg.value.trim();
  if(!name || !msg) {
    alert('Rellena nombre y comentario.');
    return;
  }
  const comment = {
    id: Math.random().toString(36).slice(2),
    name: name,
    msg: msg,
    ts: Date.now(),
    owner: sessionToken
  };
  saveComment(comment);
  cName.value=''; cMsg.value='';
});

/* load existing comments on start */
loadComments();

/* ========== UX niceties: ensure carousel shows first slide in view on load ========== */
window.addEventListener('load', ()=> updateCarousel());

</script>
</body>
</html>
